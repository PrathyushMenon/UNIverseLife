{% extends 'base.html' %}
{% block content %}
    <h2>To-Do List</h2>
    <form method="post">
        <label for="task">Task:</label>
        <input type="text" id="task" name="task" required>
        
        <label for="priority">Priority:</label>
        <select id="priority" name="priority">
            <option value="0">Low</option>
            <option value="1">Medium</option>
            <option value="2">High</option>
        </select>
        
        <label for="due_date">Due Date:</label>
        <input type="date" id="due_date" name="due_date">
        
        <label for="category">Category:</label>
        <input type="text" id="category" name="category">
        
        <button type="submit">Add Task</button>
    </form>
    
    <ul>
        {% for task in tasks %}
        <li>
            {{ task.id }}. {{ task.task }}
            
            {% if task.due_date %}
            (Due: {{ task.due_date.strftime('%Y-%m-%d') }})
            {% endif %}
            
            {% if task.category %}
            [{{ task.category }}]
            {% endif %}
            
            {% if task.status %}
            - Completed
            {% endif %}
            
            <!-- Add a button for deleting the task -->
            <form method="post" action="{{ url_for('delete_task', task_id=task.id) }}" style="display: inline;">
                <button type="submit" onclick="return confirm('Are you sure you want to delete this task?')">Delete</button>
            </form>
        </li>
        {% endfor %}
    </ul>
{% endblock %}
